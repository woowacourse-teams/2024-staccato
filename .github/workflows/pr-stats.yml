name: PR Stats
on:
  #workflow_dispatch:
  pull_request:
    branches:
      - develop

jobs:
  pr-stats:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
      - name: PR Stats
        uses: "naver/pr-stats@v1.0.0" # 이 액션의 경로와 사용할 버전
        with:
          token: ${{ secrets.HANNAH_PERSONAL_ACCESS_TOKEN }}
          ignoreUsers: "kargowild"
          count: '100'
          baseBranch: "develop"
          output: "csv"
      - name: Show CSV file path and preview content
        run: |
            echo "📝 Generated CSV file path (relative): $(realpath pr-stats.csv)"
            echo "🗂 Directory listing:"
            ls -al
            echo "📄 CSV content (first 10 lines):"
            head -n 10 pr-stats.csv
